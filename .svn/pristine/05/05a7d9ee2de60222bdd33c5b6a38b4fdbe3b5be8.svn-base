package com.evergrande.hdmp.usertags.logicquery.impl;


import com.evergrande.hdmp.usertags.logicquery.TagCondition;

import org.junit.Assert;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;


import java.util.Collection;
import java.util.HashSet;


/**
 * @author Changhua, Wu
 *         Created on: 1/19/16,11:54 AM
 */

public class TagConditionHashSetHandlerTest {


    private final static Logger logger = LoggerFactory.getLogger(TagConditionHashSetHandlerTest.class);

    @Test
    public void testHandlerVisitor() {

        TagCondition tagEnd = TagConditionSerializeTest.getTestCondition();

        TagConditionHashSetHandler handler = new TagConditionHashSetHandler();
        TagQueryResultHashSetImpl result = tagEnd.accept( handler );

        String[] expectRes =  {"2", "7", "6", "5", "4", "9", "8", "11"};
        Collection<String> expectResult = new HashSet<>();
        for(String ss: expectRes) {
            expectResult.add( ss );
        }

        logger.debug(" result: {}", result.getUsers());

        Assert.assertTrue( result.getUsers().size() == expectResult.size() );
        Assert.assertTrue( result.getUsers().containsAll(expectResult) );



    }



}
