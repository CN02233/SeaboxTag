package com.evergrande.hdmp.usertags.utils;

import org.junit.Assert;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * @author Changhua, Wu
 *         Created on: 2/16/16,4:37 PM
 */
public class UserTagUtilsTest {

    private final static Logger logger = LoggerFactory.getLogger(UserTagUtilsTest.class);

    @Test
    public void  testOneDigitToShortUrl() {
        long testVal = 11231243L;
        String  s = UserTagUtils.encodeOneDigitToShortUrl( testVal );
        logger.debug( s );

        long  val = UserTagUtils.decodeOneDigitFromShortUrl( s );
        logger.debug("after decode: val = {}", val);

        Assert.assertEquals(val , testVal);
    }


    @Test
    public void  testTwoDigitToShortUrl() {
        long testVal1 = 32445324214L;
        long testVal2 = 191;  //128 + 63
        String  s = UserTagUtils.encodeTwoDigitsToShortUrl(testVal1, testVal2);
        logger.debug(s);

        String[] twoStr = s.split(":");
        Assert.assertEquals( twoStr.length, 2);

        long  val = UserTagUtils.decodeOneDigitFromShortUrl( twoStr[0] );
        logger.debug("after decode: val = {}", val);
        Assert.assertEquals(val , testVal1);

        val = UserTagUtils.decodeOneDigitFromShortUrl( twoStr[1] );
        logger.debug("after decode: val = {}", val);
        Assert.assertEquals(val , testVal2);
    }


}
